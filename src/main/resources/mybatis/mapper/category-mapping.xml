<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.starters.ityogurt.dao.CategoryDAO">

 <select id="getAllCategoryList" resultType="categorydto">
	SELECT *
	FROM category ORDER BY category_seq
 </select>

	<select id="getCategoryByCategorySeq" resultType="categorydto">
		SELECT *	FROM category WHERE category_seq = #{categorySeq}  ORDER BY category_seq
	</select>


	<select id="countAllSub" resultType="int">
		SELECT count(sub)
		FROM category
		WHERE detail IS NULL
	</select>


<!-- 카테고리 각 type으로 카테고리 목록 찾기,	type = main, middle, sub, detail -->
	<select id="getCategoryByType" resultType="categorydto">
		SELECT * FROM category WHERE ${type} = #{typeValue};
	</select>

<!-- 사용자가 선택한 매일지식 카테고리 Seq 찾기	-->
	<select id="getCategoryByAllType" resultType="categorydto" parameterType="categorydto">
		SELECT * FROM category WHERE main = #{main} AND middle = #{middle} AND sub = #{sub} AND detail IS NULL;
	</select>
	
<!-- 관리자가 새로운 컨텐츠 추가 (카테고리 추가) -->	
	<insert id="insertCategory" parameterType="categorydto">
		INSERT into category(main, middle, sub, detail)
		values (#{main}, #{middle}, #{sub}, #{detail})
	</insert>

</mapper>